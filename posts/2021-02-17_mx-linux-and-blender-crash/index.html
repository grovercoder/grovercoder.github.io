<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  MX Linux and Blender Crash · GroverCoder
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="GroverCoder">
<meta name="description" content="
  One possible solution
  
    
    Link to heading
  


Photo by NeONBRAND on Unsplash
I recently updated my Intel NUC (model NUC6i7KYK) to run MX Linux instead of the original Debian install I had on the box. Everything is running great out of the box. Except Blender. Finding out why took a bit of sleuthing.

Short form — firing up Blender with the INTEL_DEBUG=reemit environment variable *may* clean up the crashes.

Every other box/laptop I have is running MX Linux already, and only my desktop — the Intel NUC — was still running Debian. I had just picked up a 1TB M.2 drive for that box to replace the two smaller drives (120GB and 250GB). So I was doing a re-install anyway — may as well match up everything to the same distro then.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MX Linux and Blender Crash">
  <meta name="twitter:description" content=" One possible solution Link to heading Photo by NeONBRAND on Unsplash
I recently updated my Intel NUC (model NUC6i7KYK) to run MX Linux instead of the original Debian install I had on the box. Everything is running great out of the box. Except Blender. Finding out why took a bit of sleuthing.
Short form — firing up Blender with the INTEL_DEBUG=reemit environment variable *may* clean up the crashes.
Every other box/laptop I have is running MX Linux already, and only my desktop — the Intel NUC — was still running Debian. I had just picked up a 1TB M.2 drive for that box to replace the two smaller drives (120GB and 250GB). So I was doing a re-install anyway — may as well match up everything to the same distro then.">

<meta property="og:url" content="https://grovercoder.github.io/posts/2021-02-17_mx-linux-and-blender-crash/">
  <meta property="og:site_name" content="GroverCoder">
  <meta property="og:title" content="MX Linux and Blender Crash">
  <meta property="og:description" content=" One possible solution Link to heading Photo by NeONBRAND on Unsplash
I recently updated my Intel NUC (model NUC6i7KYK) to run MX Linux instead of the original Debian install I had on the box. Everything is running great out of the box. Except Blender. Finding out why took a bit of sleuthing.
Short form — firing up Blender with the INTEL_DEBUG=reemit environment variable *may* clean up the crashes.
Every other box/laptop I have is running MX Linux already, and only my desktop — the Intel NUC — was still running Debian. I had just picked up a 1TB M.2 drive for that box to replace the two smaller drives (120GB and 250GB). So I was doing a re-install anyway — may as well match up everything to the same distro then.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-02-17T13:40:01-06:00">
    <meta property="article:modified_time" content="2021-02-17T13:40:01-06:00">
    <meta property="article:tag" content="Linux">
    <meta property="article:tag" content="Debian">
    <meta property="article:tag" content="Blender">




<link rel="canonical" href="https://grovercoder.github.io/posts/2021-02-17_mx-linux-and-blender-crash/">




<script async src="https://www.googletagmanager.com/gtag/js?id=G-GQ3RZ1R114"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-GQ3RZ1R114');
</script>


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.b04b3b293fda1eeaad08ca369d0beb7106ec93f453ce9a8a3b787a21b76e7df6.css" integrity="sha256-sEs7KT/aHuqtCMo2nQvrcQbsk/RTzpqKO3h6IbduffY=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.38bd245a7922e87128d12aa12859e32c3455413c05485c304123a6af4db69763.css" integrity="sha256-OL0kWnki6HEo0SqhKFnjLDRVQTwFSFwwQSOmr022l2M=" crossorigin="anonymous" media="screen" />
  



 


  
  
    
    <link rel="stylesheet" href="/scss/projects.min.9b320a6c6cb302209029718d86a3057d0a0a38d5db23cda6664562857e6398d1.css" integrity="sha256-mzIKbGyzAiCQKXGNhqMFfQoKONXbI82mZkVihX5jmNE=" crossorigin="anonymous" media="screen" />
  



<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://grovercoder.github.io/">
      GroverCoder
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://grovercoder.github.io/posts/2021-02-17_mx-linux-and-blender-crash/">
              MX Linux and Blender Crash
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2021-02-17T13:40:01-06:00">
                February 17, 2021
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              4-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/linux/">Linux</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/debian/">Debian</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/blender/">Blender</a>
    </span></div>

        </div>
      </header>

      

      <div class="post-content">
        
        <h2 id="one-possiblesolution">
  One possible solution
  <a class="heading-link" href="#one-possiblesolution">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p><img src="https://cdn-images-1.medium.com/max/800/0*3Sdc8aVzKKwFtGQr" alt=""></p>
<p>Photo by <a href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral"  class="external-link" target="_blank" rel="noopener">NeONBRAND</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral"  class="external-link" target="_blank" rel="noopener">Unsplash</a></p>
<p>I recently updated my Intel NUC (model <a href="https://ark.intel.com/content/www/us/en/ark/products/89187/intel-nuc-kit-nuc6i7kyk.html"  class="external-link" target="_blank" rel="noopener">NUC6i7KYK</a>) to run <a href="https://mxlinux.org/"  class="external-link" target="_blank" rel="noopener">MX Linux</a> instead of the original Debian install I had on the box. Everything is running great out of the box. Except <a href="https://www.blender.org/"  class="external-link" target="_blank" rel="noopener">Blender</a>. Finding out why took a bit of sleuthing.</p>
<blockquote>
<p>Short form — firing up Blender with the <code>INTEL_DEBUG=reemit</code> environment variable *may* clean up the crashes.</p>
</blockquote>
<p>Every other box/laptop I have is running MX Linux already, and only my desktop — the Intel NUC — was still running Debian. I had just picked up a 1TB M.2 drive for that box to replace the two smaller drives (120GB and 250GB). So I was doing a re-install anyway — may as well match up everything to the same distro then.</p>
<p>I’m using Blender to create and tweak models for 3D Printing. Under Debian Blender just worked. Although I opted for the download/standalone version rather than installing through the APT package manager. This allowed me to use a more recent version of Blender.</p>
<p>The trouble started after installing MX Linux and setting up blender in the same download/standalone manner. Blender would work for a bit and then just stop. And when it stopped it took out the KDE desktop with it. The screen would just flicker. I would switch out to terminal #1 (by double tapping ctrl-alt-F1), login, and then kill the Blender process via a <code>sudo kill -9 ####</code> command. (where the #### was the PID number found via <code>ps -aux</code> or a <code>top</code> command). Then I’d switch back to the KDE desktop with <code>ctrl-F7</code> and see that the Blender window was still displayed and the desktop was still frozen. A reboot was needed (well, that was the simplest fix I could think of at least without getting into restarting X-Windows and the window manager).</p>
<p>After this happened a few times and I lost a number of steps working in Blender I decided this needed to be looked into some more.</p>
<p>First I tried to google for “mx linux blender crash”. That was too broad. But did mention there might be some logs. I couldn’t find any specific Blender logs but did look at the <code>/var/log/messages</code> file. This showed me something that looked like this:</p>
<p><code>Feb 17 02:26:28 nuc kernel: [1281.614313] i915 0000:00:02.0 GPU HANG: ecode 9:1:85df9ebf, in blender[6868]</code></p>
<p>Ok, that didn’t look good. So I googled “blender GPU HANG” and came across a number of suggestions. First was to try an older blender. I had been running 2.91.2, so I tried 2.91.1 which had been working fine in Debian. That exhibited the same issues. So I tried the LTS version of Blender — 2.83.12 — and this showed the same issues. Finally I tried a native Blender install via APT — and even this showed the same issues.</p>
<p>Back to google then. This time I broadened my search and looked for “mx linux gpu hang”. This ultimately lead me to the fix for my specific problem as a comment found on <a href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/3748"  class="external-link" target="_blank" rel="noopener">this page</a>.</p>
<p>This does not seem to be a Blender or MX Linux specific issue. It looks as though the Intel Iris Pro graphics card that is stock with the NUC has some driver issues. KDE makes use of the GPU processing for its windows effects (transparencies, shadows, animations, etc.). It looks as though the Intel drivers sometimes do not respond quite fast enough and a timeout is encountered. When that happens the GPU HANG error takes place and takes out ANYTHING that is also using the GPU.</p>
<p>The discussion thread <a href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/3748"  class="external-link" target="_blank" rel="noopener">I found</a> does suggest a way to increase the timeout. However a “simpler” fix is to just set the INTEL_DEBUG environment variable when running blender.</p>
<p>After rebooting to clean up the login session I booted up my version of Blender with <code>INTEL_DEBUG=reemit ./blender</code> from within my blender directory. That started up and allowed me to work on my models normally. So after using it that way for a little while I edited my menu icon with this modified command <code>INTEL_DEBUG=reemit /home/myuser/bin/blender-2.91.2-linux64/blender</code>. And then I started Blender from there. Thus far I have been working in Blender for a number of hours today and have yet to experience the crash.</p>
<p>If you have read this far then you likely have an Intel video card that is showing a similar problem. I hope this helps solve your issue without having to dig through issue logs or GIT discussion threads.</p>

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2020 -
    
    2024
     GroverCoder 
    
    
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
